"use strict";angular.module("generatorFacturaApp",["foundation","ngRoute"]).config(["$routeProvider",function(a){a.when("/:lang/:id/:user",{templateUrl:"views/main.html",controller:"MainCtrl as f",resolve:{postPromise:["$bill","$route",function(a,b){return a.init(b.current.params.id)}]}})}]),angular.module("generatorFacturaApp").controller("MainCtrl",["$bill","$routeParams",function(a,b){var c={ro:{data:"Data",f_title:"Factura Fiscala",serie:"Serie",numar:"Numar",furnizor:"Furnizor",cumparator:"Cumparator",name:"Denumirea firmei",cif:"Codul unic de identificare",orc:"Numar ordin ORC",sediu:"Sediul",oras:"Oras",judet:"Judet",tara:"Tara",banca:"Banca",cont:"IBAN",total:"TOTAL",sign:"Semnatura si stampila furnizorului",disclaimer:"Prezenta factura a fost transmisa prin CORESPONDENTA ELECTRONICA. Neimpozabil cu TVA in Romania.",emitter:{text:"Factura emisa de"}},en:{data:"Date",f_title:"Invoice",serie:"Series",numar:"Number",furnizor:"Seller",cumparator:"Buyer",name:"Company name",cif:"Unique Registry Number",orc:"ORC Registry Number",sediu:"Headquarters",oras:"City",judet:"County/Region",tara:"Country",banca:"Bank",cont:"IBAN",total:"TOTAL",sign:"Stamp and signature of the seller",disclaimer:"This invoice is transmitted through ELECTRONIC MAIL. The seller is not VAT taxable in Romania.",emitter:{text:"Invoice signed by"}}},d={doru:{name:"Doru Chiulan",email:"doru@sandd.ro",cnp:"1900402250021"},andrei:{name:"Andrei Samciuc",email:"andrei@sandd.ro",cnp:"1910221250012"}},e=b.user?b.user:"andrei";angular.extend(this,{bill:a.factura(),getWidth:function(a){return{width:0!=a?""+(45-15*(this.bill.columns.length-2))+"%":"55%"}},getLineWidth:function(a){return{width:0!=a?""+(45-15*(this.bill.columns.length-2))+"%":"45%"}},int8n:c[b.lang]}),angular.extend(this.int8n.emitter,d[e])}]).service("$bill",["$http",function(a){function b(a){if(void 0===a)return 0;for(var b=0,c=0;c<a.length;c++)b+=a[c].amount;return b}var c="http://localhost:8080/facturi/",d={};this.init=function(e){return a.get(c+e).success(function(a){return d=a,d.total=b(d.products),angular.forEach(d.products,function(a){a.lines=[a.amount]}),d.columns=["PRODUCT","VALUE"],d})},this.factura=function(){return d}}]);
